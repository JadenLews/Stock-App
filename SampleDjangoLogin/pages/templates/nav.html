<style>

    .navbar-custom {
        background-color: #202020;
        border-radius: 5px !important;
        padding: 10px;
        border: .5px solid #000000 !important;
    }
    /* Base style for the search bar */
    .search-bar {
        width: 100%;
        max-width: 400px; /* Default max width */
        margin-right: 10px;
    }
    .notification-text {
        color: #FFFFFF !important;
    }
    .nav-item {
        font-size: 18px;
    }
    .container-fluid {
        border-radius: 5px !important;
    }
    .navbar .nav-item .nav-link.active {
    color: #30A900 !important;
}

    /* Expand the search bar on wider screens */
    @media (min-width: 992px) {
        .search-bar {
            max-width: 600px; /* Expand the search bar on larger screens */
            min-width: 400px;
        }
    }

    /* Style for the notifications link with a red blurb */
    .notification-icon {
        position: relative;
        display: inline-block;
    }

    .notification-blurb {
        position: absolute;
        top: 6px;
        right: 97.5px;
        width: 15px;
        height: 15px;
        background-color: red;
        border-radius: 50%;
        display: block; /* Ensure the blurb is visible */
        border: 1px solid white; /* Optional: adds a border for visibility */
    }
    
    .notification-blurb {
    display: block; /* Change to "none" if you want it hidden by default */
}

    /* Display settings for Notifications text and bell icon */
    .notification-text {
        display: inline; /* Show text on larger screens */
    }

    .notification-bell {
        display: none; /* Hide bell icon by default */
    }

    /* Switch to bell icon on smaller screens */
    @media (max-width: 768px) {
        .notification-text {
            display: none; /* Hide text on smaller screens */
        }

        .notification-bell {
            display: inline-block; /* Show bell icon on smaller screens */
        }
        .notification-blurb {
        position: absolute;
        top: 3px;
        right: 8px;
        width: 15px;
        height: 15px;
        background-color: red;
        border-radius: 50%;
        display: block; /* Ensure the blurb is visible */
        border: 1px solid white; /* Optional: adds a border for visibility */
    }
    }
</style>

<nav class="navbar navbar-expand-lg navbar-custom w-100" style="font-family: 'IBM Plex Sans', sans-serif; font-weight: 400;">
    <div class="baktop"></div>
    <div class="container-fluid px-0">
        <!-- Flex container for the search bar and notifications link -->
        <div class="d-flex align-items-center w-100">
            <!-- Group search bar and notifications to keep them together -->
            <div class="d-flex flex-grow-1 align-items-center">
                <!-- Search bar -->
                <form class="d-flex" action="{% url 'stock_details' %}" method="POST" style="margin-right: 10px;">
                    {% csrf_token %}
                    <input class="form-control search-bar" type="text" name="stock_symbol" placeholder="Search for a stock" aria-label="Search">
                </form>

                <!-- Notifications link always next to search bar with responsive text and bell icon -->
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a href="/pages/notifications " class="nav-link notification-icon {% if request.path == '/pages/notifications/' %}active{% endif %}" style="margin-right: 20px; color: #000000; font-family: 'IBM Plex Sans', sans-serif; font-weight: 600;">
                            <!-- Text for larger screens -->
                            <span class="notification-text">Notifications</span>
                            <!-- Bell icon for smaller screens -->
                            <span class="notification-bell">
                                <i class="bi bi-bell"></i>
                            </span>
                            <!-- Red blurb to indicate notifications -->
                            <span class="notification-blurb"></span>
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Hamburger button on the far right -->
            <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>




            <!--
            <button id="toggle-notification-btn" class="btn btn-primary">Toggle Notification</button>
            -->



            
        </div>

        <!-- Collapsible menu for nav links -->
        <div class="collapse navbar-collapse" id="navbarNav">
            <!-- Left-aligned links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a href="/pages/home/" class="nav-link {% if request.path == '/pages/home/' %}active{% endif %}" style="margin-right: 20px; color: #FFFFFF; font-family: 'IBM Plex Sans', sans-serif; font-weight: 600;">Dashboard</a>
                </li>
                <li class="nav-item">
                    <a href="/pages/portfolio/" class="nav-link {% if request.path == '/pages/portfolio/' %}active{% endif %}" style="margin-right: 20px; color: #FFFFFF; font-family: 'IBM Plex Sans', sans-serif; font-weight: 600;">Portfolio</a>
                </li>
                <li class="nav-item">
                    <a href="/pages/watchlist/" class="nav-link {% if request.path == '/pages/watchlist/' %}active{% endif %}" style="margin-right: 20px; color: #FFFFFF; font-family: 'IBM Plex Sans', sans-serif; font-weight: 600;">Watchlist</a>
                </li>
            </ul>
        </div>
    </div>
</nav>
{% block scripts %}
<script>
    document.addEventListener("DOMContentLoaded", function() {
    document.getElementById("toggle-notification-btn").addEventListener("click", function () {
        const notificationBlurb = document.querySelector(".notification-blurb");
        if (notificationBlurb.style.display === "none" || notificationBlurb.style.display === "") {
            notificationBlurb.style.display = "block";  // Show blurb
        } else {
            notificationBlurb.style.display = "none";  // Hide blurb
        }
    });
});
</script>
{% endblock %}

<!-- Ensure these scripts are at the bottom of your body for proper loading -->
<!-- Load Popper.js first -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz1MxCkPcZ7D1GO1YI1bEB5DX2to5OQgChz6kPOFN16pqBsOb1As4gUJwN" crossorigin="anonymous"></script>
<!-- Load Bootstrap JS after Popper.js -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+YxiXkk+U+AMVyTt4w4BYAOA0ywoY" crossorigin="anonymous"></script>
<!--Search bar
            1.	Change the Search Functionality:
	â€¢	You can modify the action attribute of the <form> element to specify where the form data
         is sent when submitted. For example, action="/search/" would direct the form submission
          to a URL endpoint /search/.-->